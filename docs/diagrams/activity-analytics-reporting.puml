@startuml activity-analytics-reporting
title Activity Diagram: Analytics & Reporting

skinparam backgroundColor #f8fafc
skinparam activityBackgroundColor #dbeafe
skinparam activityBorderColor #2b6cb0
skinparam activityFontColor #0f172a

|User|
start
:Access Analytics;

if (Report Type?) then (Dashboard)
  |System|
  :Load Dashboard Data;
  note right
    KPIs loaded in parallel:
    • Total inventory value
    • Low stock alerts count
    • Recent receipts summary
    • Top products by value/movement
    • Warehouse occupancy rates
    • Pending transfers
  end note
  
  :Render Dashboard;
  note right
    • KPI cards
    • Quick action buttons
    • Charts & graphs
    • Alert notifications
    • Recent activity feed
  end note
  
  |User|
  if (Drill Down?) then (yes)
    :Click Chart/Metric;
    |System|
    :Load Detailed View;
    :Display Drill-Down Data;
    stop
  else (no)
    stop
  endif

elseif (Inventory Analytics) then
  |User|
  :Configure Filters;
  note right
    • Date range
    • Warehouse(s)
    • Product category
    • Status
  end note
  
  |System|
  :Query Inventory Data;
  :Calculate Analytics;
  note right
    • Stock levels by warehouse
    • Value distribution
    • Turnover rates
    • ABC analysis
    • Slow/dead stock
    • Reorder recommendations
  end note
  
  :Display Analytics;
  note right
    • Summary tables
    • Charts (pie, bar, line)
    • Heatmaps
    • Trend analysis
  end note
  
  |User|
  if (Export?) then (yes)
    :Select Format;
    |System|
    :Generate Export;
    :Send to Browser;
    stop
  else (no)
    stop
  endif

elseif (Receipt Analytics) then
  |User|
  :Configure Parameters;
  note right
    • Date range
    • Receipt type (purchase/sales)
    • Warehouse
    • Supplier/customer
  end note
  
  |System|
  :Query Receipt Data;
  :Calculate Metrics;
  note right
    • Total volume & value
    • Trends over time
    • Top products
    • Top suppliers/customers
    • Average transaction size
    • Processing times
  end note
  
  :Display Analytics;
  note right
    • Summary cards
    • Trend charts
    • Comparison tables
    • Distribution graphs
  end note
  
  |User|
  if (Export?) then (yes)
    :Select Format;
    |System|
    :Generate Export;
    :Send to Browser;
    stop
  else (no)
    stop
  endif

elseif (Warehouse Analytics) then
  |User|
  :Select Warehouse(s);
  
  |System|
  :Load Warehouse Data;
  :Calculate Analytics;
  note right
    • Zone utilization rates
    • Capacity vs occupancy
    • Throughput metrics
    • Pick/put-away rates
    • Product distribution
    • Performance trends
  end note
  
  :Display Analytics;
  note right
    • Warehouse overview
    • Zone heatmaps
    • Utilization charts
    • Performance metrics
    • Efficiency scores
  end note
  
  |User|
  if (Export?) then (yes)
    :Select Format;
    |System|
    :Generate Export;
    stop
  else (no)
    stop
  endif

else (Custom Report)
  |User|
  :Select Report Template;
  note right
    Templates: Inventory Valuation,
    Stock Movement, Sales Summary,
    Purchase History, Supplier Performance,
    ABC Analysis, Aging Report
  end note
  
  :Configure Parameters;
  note right
    • Date range
    • Filters & grouping
    • Metrics to include
    • Sort order
  end note
  
  |System|
  :Validate Parameters;
  
  if (Valid?) then (yes)
    :Execute Report Query;
    :Process Data;
    note right
      • Aggregate data
      • Calculate metrics
      • Apply grouping
      • Generate summaries
    end note
    
    :Display Report;
    note right
      • Data tables
      • Charts & graphs
      • Summary statistics
      • Export options
    end note
    
    |User|
    if (Action?) then (Export)
      :Select Format;
      note right
        Formats: Excel, PDF, CSV, JSON
      end note
      
      |System|
      :Generate Export File;
      note right
        • Format data
        • Add branding (PDF)
        • Include charts (Excel/PDF)
        • Compress if large
      end note
      
      :Send to Browser;
      stop
      
    elseif (Schedule) then
      :Configure Schedule;
      note right
        • Frequency (daily, weekly, monthly)
        • Recipients
        • Format
        • Delivery method
      end note
      
      |System|
      :Create Scheduled Report;
      :Send Confirmation;
      stop
      
    else (Modify)
      backward:Return to parameters;
    endif
  else (no)
    :Show Validation Errors;
    stop
  endif
endif

@enduml
